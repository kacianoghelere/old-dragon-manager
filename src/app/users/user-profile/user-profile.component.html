<layout-base *ngIf="user" [title]="user.name">
  <div class="row">
    <div class="col-xs-12 col-sm-4 col-md-3">
      <div class="card">
        <img class="card-img-top" [src]="avatar" [alt]="user?.name">
        <div class="card-body">
          <small class="card-text">
            <b>Perfil:</b> {{user?.role?.name}}
          </small>
          <small class="card-text">
            <b>E-mail:</b> {{user?.email}}
          </small>
          <small class="card-text">
            <b>Último acesso em:</b> {{user?.last_login | date }}
          </small>
        </div>
        <div class="card-footer" *ngIf="canChange">
          <router-link classes="card-link" path="settings">
            <i class="fa fa-cog"></i> Opções
          </router-link>
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-sm-8 col-md-9">
      <h2>Criações</h2>
      <div class="card">
        <div class="card-header">
          <nav class="nav nav-tabs nav-fill card-header-tabs">
            <a class="nav-link text-center pointer" (click)="setActiveTab('C')"
                [ngClass]="{active: isActiveTab('C')}">
              <i class="fa fa-book"></i> Campanhas
            </a>
            <a class="nav-link text-center pointer" (click)="setActiveTab('P')"
                [ngClass]="{active: isActiveTab('P')}">
              <i class="fa fa-users"></i> Personagens
            </a>
            <a class="nav-link text-center pointer" (click)="setActiveTab('I')"
                [ngClass]="{active: isActiveTab('I')}">
              <i class="fa fa-envelope-o"></i> Convites
            </a>
          </nav>
        </div>

        <user-campaigns [user]="user" *ngIf="isActiveTab('C')"></user-campaigns>

        <user-characters [user]="user" *ngIf="isActiveTab('P')"></user-characters>

        <ul class="list-group list-group-flush" *ngIf="isActiveTab('I')">
          <li class="list-group-item"
              *ngFor="let invitation of user.invitations">
            <user-campaign-invitation [user]="user"
              [invitation]="invitation"
              (invitationCompleted)="refresh()"
              ></user-campaign-invitation>
          </li>
        </ul>
      </div>
    </div>
  </div>
</layout-base>
