<form *ngIf="journalForm" [formGroup]="journalForm"
    (ngSubmit)="onSubmit(journalForm)">
  <h2 class="form-title">Editar Diário de Campanha</h2>

  <input type="hidden" formControlName="id">

  <section>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label" for="journalDescription">
        Descrição
      </label>
      <div class="col-sm-10">
        <textarea class="form-control"
          id="journalDescription"
          rows="10"
          [ngClass]="getErrorClass(journalForm.controls.description)"
          formControlName="description"></textarea>
        <div class="invalid-feedback">
          Descrição de diário de campanha inválida.
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label">
        Opções
      </label>
      <div class="col-sm-10 col-md-10">
        <label class="custom-control custom-checkbox">
          <input class="custom-control-input" type="checkbox"
              formControlName="active">
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description">Ativo</span>
        </label>
      </div>
    </div>
  </section>

  <section>
    <div class="form-group row">
      <div class="ml-auto col-sm-10">
        <markdown-instructions></markdown-instructions>
      </div>
    </div>
  </section>

  <section>
    <div class="form-group row">
      <div class="ml-auto col-6">
        <button class="btn btn-primary" type="submit"
            [disabled]="journalForm.invalid">
          <i class="fa fa-edit"></i> Salvar
        </button>
        <button class="btn btn-link pointer" type="button" (click)="goBack()">
          <i class="fa fa-remove"></i> Cancelar
        </button>
      </div>
      <div class="ml-auto col-2 text-right">
        <button class="btn btn-outline-danger pointer"
            type="button"
            *ngIf="canDestroy()"
            mwlConfirmationPopover
            title="Confirmação necessária"
            message="Deseja realmente deletar o diário?"
            placement="left"
            confirmText="Excluir"
            cancelText="Cancelar"
            (confirm)="destroyJournal()">
          <i class="fa fa-trash"></i> Excluir Diário
        </button>
      </div>
    </div>
  </section>
</form>
